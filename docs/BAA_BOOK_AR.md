<div dir="rtl">

# كتاب باء (Baa): لغة نظم عربية — دليل تعلّم ومرجع

> **الإصدار المستهدف:** 0.2.9  
> **الفكرة:** كتاب تمهيدي على أسلوب كتب اللغة الكلاسيكية (تعلم + مرجع)، مع أمثلة وتمارين.

---

## فهرس المحتويات

1. [مقدمة](#1-مقدمة)
2. [التهيئة وبناء المترجم](#2-التهيئة-وبناء-المترجم)
3. [البرنامج الأول](#3-البرنامج-الأول)
4. [الكتابة الصحيحة: الترميز وعلامات الترقيم](#4-الكتابة-الصحيحة-الترميز-وعلامات-الترقيم)
5. [الأنواع والمتغيرات والثوابت](#5-الأنواع-والمتغيرات-والثوابت)
6. [التعابير والمعاملات](#6-التعابير-والمعاملات)
7. [التدفق المنطقي: إذا/وإلا والحلقات](#7-التدفق-المنطقي-إذاوإلا-والحلقات)
8. [الدوال واستدعاؤها](#8-الدوال-واستدعاؤها)
9. [المصفوفات (int فقط)](#9-المصفوفات-int-فقط)
10. [الإدخال/الإخراج: اطبع واقرأ](#10-الإدخالالإخراج-اطبع-واقرأ)
11. [المشروعات متعددة الملفات والتضمين](#11-المشروعات-متعددة-الملفات-والتضمين)
12. [المعالج القبلي (Preprocessor)](#12-المعالج-القبلي-preprocessor)
13. [التشخيص: الأخطاء والتحذيرات](#13-التشخيص-الأخطاء-والتحذيرات)
14. [الأداء وأفضل الممارسات](#14-الأداء-وأفضل-الممارسات)
15. [مرجع سريع](#15-مرجع-سريع)

---

## 1. مقدمة

لغة **باء (Baa)** هي لغة برمجة مُترجمة بأسلوب عربي، تستهدف حاليًا نظام **Windows x86-64** عبر توليد تجميع (Assembly) ثم استخدام **MinGW-w64 gcc** للتجميع والربط.

هذا الكتاب يهدف إلى أن يكون:

- دليلًا تعليميًا يبدأ من الأساسيات إلى الميزات المتقدمة ضمن نطاق **v0.2.9**
- مرجعًا سريعًا للكلمات المفتاحية والمعاملات وصياغة الأوامر
- موردًا عمليًا يحتوي على أمثلة صحيحة وتمارين للتثبيت

---

## 2. التهيئة وبناء المترجم

### المتطلبات (Windows)

- CMake 3.10+
- MinGW-w64 (GCC) ويُفضّل أن يكون `gcc` على `PATH`
- PowerShell
- Git

### البناء من المصدر

```powershell
git clone https://github.com/OmarAglan/Baa.git
cd Baa
mkdir build
cd build
cmake ..
cmake --build .
```

بعد البناء ستجد `baa.exe` داخل مجلد `build`.

---

## 3. البرنامج الأول

احفظ الملف بترميز **UTF-8**.

```baa
// برنامجي الأول في باء
صحيح الرئيسية() {
    اطبع "مرحباً بالعالم!".
    إرجع ٠.
}
```

الترجمة والتنفيذ (من داخل مجلد `build` مثلًا):

```powershell
.\baa.exe ..\hello.baa -o hello.exe
.\hello.exe
```

---

## 4. الكتابة الصحيحة: الترميز وعلامات الترقيم

### 4.1. الترميز (Encoding)

- الملفات يجب أن تكون **UTF-8** حتى تظهر الكلمات العربية بشكل صحيح داخل المترجم.

### 4.2. علامة نهاية الجملة

- كل جملة تنتهي بنقطة `.` (بديلًا عن `;` في C).

### 4.3. فاصلة for العربية

- حلقة `لكل` تستخدم الفاصلة المنقوطة العربية **`؛`** للفصل داخل الأقواس.

مثال صحيح:

```baa
لكل (صحيح س = ٠؛ س < ٣؛ س++) {
    اطبع س.
}
```

---

## 5. الأنواع والمتغيرات والثوابت

### 5.1. الأنواع الأساسية (v0.2.9)

- `صحيح` عدد صحيح (يُخزّن في 8 بايت)
- `نص` مؤشر لنص ثابت (سلسلة نصية)
- `منطقي` قيمة منطقية (`صواب`/`خطأ` وتُخزّن كـ 1/0)

ملاحظة: توجد **محارف حرفية** مثل `'أ'` لكن لا توجد كلمة نوع `حرف` في v0.2.9.

### 5.2. تعريف متغير (محلي)

في v0.2.9، تعريف المتغير المحلي يتطلب **تهيئة**:

```baa
صحيح الرئيسية() {
    صحيح س = ١٠.
    نص رسالة = "باء".
    منطقي جاهز = صواب.
    إرجع ٠.
}
```

### 5.3. المتغيرات العامة (Global)

المتغير العام يمكن أن يُعرّف بقيمة ابتدائية أو بدونها:

```baa
صحيح س.           // قيمة افتراضية
صحيح ص = ١٠.
نص اسم = "علي".
```

### 5.4. الثوابت: `ثابت`

الثابت لا يمكن إعادة إسناده بعد التهيئة:

```baa
صحيح الرئيسية() {
    ثابت صحيح حد = ١٠٠.
    // حد = ٢٠٠.  // خطأ دلالي
    اطبع حد.
    إرجع ٠.
}
```

---

## 6. التعابير والمعاملات

### 6.1. معاملات حسابية

- `+ - * / %`
- `++ --` (بعدي postfix)

```baa
صحيح الرئيسية() {
    صحيح س = ١٠.
    س++.
    اطبع س.
    إرجع ٠.
}
```

### 6.2. المقارنات والمنطق

- المقارنة: `== != < > <= >=`
- المنطق: `&& || !` مع **تقييم قصير** (short-circuit)

```baa
صحيح الرئيسية() {
    صحيح س = ٥.
    إذا (س > ٠ && س < ١٠) {
        اطبع "ضمن المجال".
    }
    إرجع ٠.
}
```

---

## 7. التدفق المنطقي: إذا/وإلا والحلقات

### 7.1. إذا/وإلا

```baa
صحيح الرئيسية() {
    صحيح عمر = ١٨.
    إذا (عمر >= ١٨) {
        اطبع "بالغ".
    } وإلا {
        اطبع "قاصر".
    }
    إرجع ٠.
}
```

### 7.2. طالما (while)

```baa
صحيح الرئيسية() {
    صحيح س = ٣.
    طالما (س > ٠) {
        اطبع س.
        س = س - ١.
    }
    إرجع ٠.
}
```

### 7.3. لكل (for)

```baa
صحيح الرئيسية() {
    لكل (صحيح س = ٠؛ س < ٣؛ س++) {
        اطبع س.
    }
    إرجع ٠.
}
```

### 7.4. توقف/استمر

```baa
صحيح الرئيسية() {
    لكل (صحيح س = ٠؛ س < ١٠؛ س++) {
        إذا (س == ٥) {
            استمر.
        }
        إذا (س == ٨) {
            توقف.
        }
        اطبع س.
    }
    إرجع ٠.
}
```

### 7.5. اختر (switch)

```baa
صحيح الرئيسية() {
    صحيح س = ٢.
    اختر (س) {
        حالة ١:
            اطبع "واحد".
            توقف.
        حالة ٢:
            اطبع "اثنان".
            توقف.
        افتراضي:
            اطبع "غير ذلك".
            توقف.
    }
    إرجع ٠.
}
```

---

## 8. الدوال واستدعاؤها

### 8.1. تعريف دالة

```baa
صحيح جمع(صحيح أ, صحيح ب) {
    إرجع أ + ب.
}
```

### 8.2. الاستدعاء

```baa
صحيح الرئيسية() {
    صحيح ن = جمع(١٠, ٢٠).
    اطبع ن.
    إرجع ٠.
}
```

### 8.3. النماذج الأولية (Prototypes)

يمكن إعلان الدالة بدون جسم باستخدام نقطة في النهاية:

```baa
صحيح جمع(صحيح أ, صحيح ب).
```

---

## 9. المصفوفات (int فقط)

في v0.2.9، المصفوفات مدعومة فقط لنوع `صحيح` وبحجم ثابت.

```baa
صحيح الرئيسية() {
    صحيح قائمة[٥].
    لكل (صحيح س = ٠؛ س < ٥؛ س++) {
        قائمة[س] = س * ١٠.
    }

    صحيح مجموع = ٠.
    لكل (صحيح س = ٠؛ س < ٥؛ س++) {
        مجموع = مجموع + قائمة[س].
    }

    اطبع مجموع.
    إرجع ٠.
}
```

---

## 10. الإدخال/الإخراج: اطبع واقرأ

### 10.1. اطبع

- يطبع قيمة ثم سطرًا جديدًا.
- الطباعة تستخدم `printf` في الخلفية.

ملاحظة تنفيذية (v0.2.9): تتم الطباعة حاليًا بصيغة `"%d\\n"` للأعداد والمنطق، و`"%s\\n"` للنصوص.

### 10.2. اقرأ

- يقرأ عددًا صحيحًا من الإدخال القياسي إلى متغير.

```baa
صحيح الرئيسية() {
    صحيح س = ٠.
    اقرأ س.
    اطبع س.
    إرجع ٠.
}
```

---

## 11. المشروعات متعددة الملفات والتضمين

### 11.1. ملفات المصدر والرؤوس

- المصدر: `.baa`
- الرأس: `.baahd` (إعلانات فقط)

**math.baahd**

```baa
صحيح جمع(صحيح أ, صحيح ب).
```

**math.baa**

```baa
صحيح جمع(صحيح أ, صحيح ب) {
    إرجع أ + ب.
}
```

**main.baa**

```baa
#تضمين "math.baahd"

صحيح الرئيسية() {
    اطبع جمع(١٠, ٢٠).
    إرجع ٠.
}
```

البناء:

```powershell
.\baa.exe main.baa math.baa -o app.exe
.\app.exe
```

ملاحظة: `#تضمين` يبحث عن الملفات نسبةً إلى **مجلد التشغيل الحالي**.

---

## 12. المعالج القبلي (Preprocessor)

اللغة تدعم التوجيهات التالية:

- `#تضمين "file.baahd"`
- `#تعريف الاسم القيمة`
- `#إذا_عرف الاسم` ... `#وإلا` ... `#نهاية`
- `#الغاء_تعريف الاسم`

مثال:

```baa
#تعريف حد ٣

صحيح الرئيسية() {
#إذا_عرف حد
    اطبع حد.
#وإلا
    اطبع ٠.
#نهاية
    إرجع ٠.
}
```

---

## 13. التشخيص: الأخطاء والتحذيرات

### 13.1. الأخطاء

الأخطاء النحوية تُعرض بصيغة:

`[Error] file:line:col: <message>` مع سطر من المصدر وسهم `^`.

أخطاء المحلل اللفظي تظهر بصيغ مثل:

- `Lexer Error: Unknown byte 0x..`
- `Lexer Error: Unterminated string ...`

### 13.2. التحذيرات

التحذيرات تُفعل بـ `-Wall` أو أعلام محددة مثل `-Wunused-variable` و`-Wdead-code`.  
يمكن تحويل التحذيرات إلى أخطاء بـ `-Werror`.

---

## 14. الأداء وأفضل الممارسات

### 14.1. نصائح أداء

- تجنب التعابير المكثفة داخل حلقات كبيرة إذا أمكن.
- انتبه إلى الاستدعاء التكراري (Recursion) لأن عمق الاستدعاء قد يؤدي إلى تجاوز المكدس.

### 14.2. أخطاء شائعة

- نسيان النقطة `.` في نهاية الجملة.
- استخدام `;` بدل `؛` داخل `لكل`.
- تعريف متغير محلي بدون تهيئة (غير مدعوم في v0.2.9).

---

## 15. مرجع سريع

### 15.1. الكلمات المفتاحية

`صحيح` `نص` `منطقي` `ثابت` `إذا` `وإلا` `طالما` `لكل` `اختر` `حالة` `افتراضي` `اطبع` `اقرأ` `إرجع` `توقف` `استمر` `صواب` `خطأ`

### 15.2. المعاملات

حسابية: `+ - * / %`  
زيادة/نقصان: `++ --`  
مقارنة: `== != < > <= >=`  
منطق: `&& || !`

### 15.3. ملاحق للتمارين (قالب)

لإضافة تمارين على أسلوب الكتب الكلاسيكية:

- **التمرين:** اكتب برنامجًا يحسب مجموع عناصر مصفوفة.
- **المدخلات:** (اختياري) قراءة حجم وعناصر.
- **المخرجات:** المجموع.
- **نصائح:** استخدم `لكل` و`اقرأ` و`اطبع`.

---

## مراجعة لغوية وتقنية (Checklist)

هذا الكتاب يحتاج مراجعة من مختصين عرب قبل اعتباره مرجعًا نهائيًا:

- تدقيق المصطلحات وتوحيدها
- التحقق من صحة الأمثلة عبر تجميعها على v0.2.9
- التأكد من ملاءمة الأمثلة ثقافيًا ولغويًا
- إضافة حلول/تلميحات للتمارين

</div>

