// ملف اختبار شامل للغة باء - الإصدار 0.2.2
// يختبر: المتغيرات، المصفوفات، التكرار، الشروط، الاختيار، الدوال

// متغير عام (نص)
نص ترحيب = "--- بداية اختبار النظام ---".

// دالة تكرارية (Recursion) لحساب المضروب
صحيح مضروب(صحيح ن) {
    إذا (ن <= ١) {
        إرجع ١.
    }
    إرجع ن * مضروب(ن - ١).
}

صحيح الرئيسية() {
    اطبع ترحيب.

    // 1. اختبار العمليات الحسابية وطي الثوابت
    // المفروض يحسب الكومبايلر: 5 * 2 = 10, + 10 = 20
    صحيح س = ١٠ + ٥ * ٢. 
    اطبع "قيمة س (يجب أن تكون ٢٠):".
    اطبع س.

    // 2. اختبار الشروط الممتدة (Extended If)
    اطبع "اختبار الشروط:".
    إذا (س > ٣٠) {
        اطبع "خطأ: س ليس أكبر من ٣٠".
    } وإلا إذا (س < ١٠) {
        اطبع "خطأ: س ليس أصغر من ١٠".
    } وإلا {
        اطبع "نجاح: الشرط صحيح (وإلا)".
    }

    // 3. اختبار جملة الاختيار (Switch)
    اطبع "اختبار جملة اختر:".
    اختر (س) {
        حالة ١٠:
            اطبع "خطأ: الحالة ١٠".
            توقف.
        حالة ٢٠:
            اطبع "نجاح: الحالة ٢٠".
            توقف.
        افتراضي:
            اطبع "خطأ: الحالة الافتراضية".
            توقف.
    }

    // 4. اختبار الحلقات والتحكم (Break/Continue)
    // المطلوب: طباعة ١، ٢، ٤ (تجاوز ٣ والتوقف عند ٥)
    اطبع "اختبار الحلقة (١، ٢، ٤):".
    لكل (صحيح ع = ١؛ ع < ١٠؛ ع++) {
        إذا (ع == ٣) {
            استمر. // تجاوز الرقم ٣
        }
        إذا (ع == ٥) {
            توقف. // الخروج عند ٥
        }
        اطبع ع.
    }

    // 5. اختبار استدعاء الدوال
    اطبع "اختبار الدالة التكرارية (مضروب ٥ = ١٢٠):".
    اطبع مضروب(٥).

    // 6. اختبار المصفوفات
    صحيح قائمة[٣].
    قائمة[٠] = ١٠٠.
    قائمة[١] = ٢٠٠.
    قائمة[٢] = ٣٠٠.
    
    اطبع "عنصر المصفوفة الثاني (٢٠٠):".
    اطبع قائمة[١].

    اطبع "--- نهاية الاختبار بنجاح ---".
    إرجع ٠.
}